(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/aui/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("AUI")],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("Drawer"),a("TopBar",{attrs:{title:t.title,connected:t.connected}}),a("v-main",[a("router-view",{on:{"update-title":t.updateTitle}})],1),a("Footer"),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Enter Password")])]),a("v-card-text",[a("v-container",[a("v-text-field",{attrs:{label:"Password","append-icon":t.value?"mdi-eye":"mdi-eye-off",type:t.value?"password":"text",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.logon_done()},"click:append":function(){return t.value=!t.value}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.logon_done()}}},[t._v(" OK ")])],1)],1)],1)],1)},o=[],l=(a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{height:"50",color:"indigo",padless:"",app:""}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-card",{attrs:{color:"indigo",flat:""}},[a("v-card-text",[t._v(" Booted: "+t._s(t.booted)+" | Uptime: "+t._s(t.uptime)+" ")])],1),a("v-spacer"),t._l(t.icons,(function(e){return a("v-btn",{key:e.name,staticClass:"my-2",attrs:{color:"white",text:"",rounded:""}},[a("a",{attrs:{href:e.url,target:e.target}},[a("v-icon",{attrs:{color:"white",size:"24px"}},[t._v(t._s(e.name))])],1)])}))],2)],1)}),c=[],u={name:"Footer",data:function(){return{booted:"...",uptime:"...",icons:[{name:"mdi-github",url:"https://github.com/AppDaemon",target:"_blank"},{name:"mdi-text-box",url:"https://appdaemon.readthedocs.io/en/latest/",target:"_blank"},{name:"mdi-discord",url:"https://discord.gg/sgSr79jW5x",target:"_blank"},{name:"mdi-forum",url:"https://community.home-assistant.io/c/third-party/appdaemon/21",target:"_blank"}],subs:[]}},mounted:function(){this.subs.push(this.$SUBS.add_sub("state","admin.sensor.appdaemon_booted",this.booted_change)),this.subs.push(this.$SUBS.add_sub("state","admin.sensor.appdaemon_uptime",this.uptime_change))},beforeDestroy:function(){this.$AD.remove_subs(this.subs)},methods:{booted_change:function(t,e,a){this.booted=new Date(a.state).toLocaleString()},uptime_change:function(t,e,a){this.uptime=a.state}}},d=u,h=(a("760c"),a("2877")),v=a("6544"),p=a.n(v),f=a("8336"),_=a("b0af"),m=a("99d9"),b=a("553a"),g=a("132d"),y=a("0fd9"),k=a("2fa4"),x=Object(h["a"])(d,l,c,!1,null,null,null),S=x.exports;p()(x,{VBtn:f["a"],VCard:_["a"],VCardText:m["c"],VFooter:b["a"],VIcon:g["a"],VRow:y["a"],VSpacer:k["a"]});var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{attrs:{app:"",color:"indigo",dark:"",height:"50"}},[a("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[a("v-row",{attrs:{"no-gutters":"",align:"center"}},[a("v-col",[a("v-toolbar-title",[t._v("AppDaemon "+t._s(t.version))])],1),a("v-col",[a("v-card-title",{staticClass:"justify-center"},[t._v(" "+t._s(t.title)+" ")])],1),a("v-col",[a("v-card-title",{staticClass:"justify-end"},[t.connected?[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({},"v-icon",n,!1),s),[t._v("mdi-lan-connect")])]}}],null,!1,1647777282)},[a("span",[t._v("Connected")])])]:[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({},"v-icon",n,!1),s),[t._v("mdi-lan-disconnect")])]}}])},[a("span",[t._v("Disconnected")])])],a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",t._l(t.menu,(function(e){return a("v-list-item",{key:e.option,on:{click:e.callback}},[a("v-list-item-title",[t._v(t._s(e.option))])],1)})),1)],1)],2)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.about,callback:function(e){t.about=e},expression:"about"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[a("span",[t._v("About AppDaemon")])]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-img",{staticClass:"ma-5",attrs:{height:"50",width:"50",src:"appdaemon.png"}})],1),a("v-col",{attrs:{cols:"8"}},[a("v-card-title",{staticClass:"black--text"},[t._v(" AppDaemon ")])],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card-text",{staticClass:"black--text"},[t._v(" Icons made by "),a("a",{attrs:{href:"http://www.freepik.com",title:"Freepik"}},[t._v("Freepik")]),t._v(" from "),a("a",{attrs:{href:"http://www.flaticon.com",title:"Flaticon"}},[t._v("www.flaticon.com")]),t._v(" is licensed by "),a("a",{attrs:{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"}},[t._v("CC 3.0 BY")])])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.about=!1}}},[t._v(" OK ")])],1)],1)],1)],1)},V=[],$={name:"TopBar",data:function(){return{about:!1,connected:!1,version:"",menu:[{option:"Logout",callback:this.logout},{option:"About",callback:this.show_about}],subs:[]}},props:{title:String},mounted:function(){this.subs.push(this.$SUBS.add_sub("connect",null,this.connect_change)),this.subs.push(this.$SUBS.add_sub("state","admin.sensor.appdaemon_version",this.version_change))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{connect_change:function(t,e,a){this.connected=a},version_change:function(t,e,a){this.version="v"+a.state},logout:function(){this.$SUBS.logout()},show_about:function(){this.about=!0}}},T=$,C=a("40dc"),E=a("62ad"),O=a("a523"),U=a("169a"),D=a("adda"),L=a("8860"),j=a("da13"),B=a("5d23"),A=a("e449"),I=a("2a7f"),q=a("3a2f"),P=Object(h["a"])(T,w,V,!1,null,null,null),F=P.exports;p()(P,{VAppBar:C["a"],VBtn:f["a"],VCard:_["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:E["a"],VContainer:O["a"],VDialog:U["a"],VIcon:g["a"],VImg:D["a"],VList:L["a"],VListItem:j["a"],VListItemTitle:B["b"],VMenu:A["a"],VRow:y["a"],VSpacer:k["a"],VToolbarTitle:I["a"],VTooltip:q["a"]});var N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{app:"","mini-variant":t.mini}},[a("v-card",{attrs:{flat:"",height:"50"}},[a("v-list-item",[a("v-list-item-icon",{on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[a("v-icon",[t._v("mdi-menu")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("MENU")])],1)],1)],1),a("v-divider"),a("v-list",t._l(this.$TABS,(function(e){return a("v-list-item",{key:e.title,attrs:{to:e.nav}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1)},M=[],R={name:"Sidebar",data:function(){return{mini:!0,items:[]}},methods:{}},H=R,K=a("ce7e"),J=a("34c3"),z=a("f774"),X=Object(h["a"])(H,N,M,!1,null,null,null),Y=X.exports;p()(X,{VCard:_["a"],VDivider:K["a"],VIcon:g["a"],VList:L["a"],VListItem:j["a"],VListItemContent:B["a"],VListItemIcon:J["a"],VListItemTitle:B["b"],VNavigationDrawer:z["a"]});var G=a("279c"),Q=a.n(G),W={name:"adui",components:{Footer:S,TopBar:F,Drawer:Y},data:function(){return{connected:!1,title:"",dialog:!1,password:"",value:String}},methods:{updateTitle:function(t){this.title=t},need_logon:function(){this.password="",this.dialog=!0},logon_done:function(){this.dialog=!1;var t=this.encryptPassword(this.password);this.$SUBS.ad_connect(this.need_logon.bind(this),t)},encryptPassword:function(t){var e=Q.a.genSaltSync(10);return Q.a.hashSync(t,e)}},mounted:function(){var t=window.location.hostname,e=window.location.port,a=window.location.search.substring(1),s=new URLSearchParams(a);null!==s.get("host")&&null!==s.get("port")&&(t=s.get("host"),e=s.get("port")),this.$SUBS.set_host(t,e),this.$SUBS.ad_connect(this.need_logon.bind(this),null)}},Z=W,tt=a("f6c4"),et=a("8654"),at=Object(h["a"])(Z,r,o,!1,null,null,null),st=at.exports;p()(at,{VBtn:f["a"],VCard:_["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VContainer:O["a"],VDialog:U["a"],VMain:tt["a"],VSpacer:k["a"],VTextField:et["a"]});var nt={name:"adui",components:{AUI:st}},it=nt,rt=a("7496"),ot=Object(h["a"])(it,n,i,!1,null,null,null),lt=ot.exports;p()(ot,{VApp:rt["a"]});var ct=a("d4ec"),ut=a("bee2"),dt=(a("38cf"),a("159b"),a("b64b"),a("1276"),a("a434"),function(){function t(){Object(ct["a"])(this,t)}return Object(ut["a"])(t,[{key:"formatDate",value:function(t){var e="";if("never"!==t){var a=new Date(t);e=a.toLocaleString()}else e=t;return e}},{key:"formatFixedLen",value:function(t,e){var a=String(t),s="";return s=a.length<=e?a+" ".repeat(e-a.length):a.substring(0,e),s}},{key:"formatArgs",value:function(t){var e="";return Object.keys(t).forEach((function(a){e+="|"+a+"="+t[a]})),e+="|",e}},{key:"update_sensor_block",value:function(t,e,a,s){for(var n=0;n<s.length;n++)s[n].entity===t&&(s[n].state=a)}},{key:"update_entity_table",value:function(t,e,a,s,n){var i=t.split("."),r=i[0],o=i[1]+"."+i[2];if("add"===e)s.push(n(r,a,{}));else if("update"===e){for(var l=0;l<s.length;l++)if(s[l].entity_id===o){n(r,a,s[l]);break}}else if("remove"===e){for(var c=-1,u=0;u<s.length;u++)if(s[u].entity_id===o){c=u;break}-1!==c&&s.splice(c,1)}}}]),t}()),ht=a("8c4f"),vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Home")},pt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",{attrs:{color:"white",flat:""}},[a("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[a("v-avatar",{staticClass:"ma-3",attrs:{size:"75",tile:""}},[a("v-img",{attrs:{src:"appdaemon.png"}})],1),a("div",[a("v-card-title",{staticClass:"headline text--black"},[t._v(" AppDaemon ")]),a("v-card-subtitle",[t._v("Sandboxed python Apps for Home Automation")])],1)],1)]),a("v-divider"),a("div",{staticClass:"py-5"},[a("v-list",t._l(this.$TABS,(function(e){return a("v-list-item",{key:e.title,attrs:{to:e.nav}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1)],1)},_t=[],mt={name:"Home"},bt=mt,gt=a("8212"),yt=Object(h["a"])(bt,ft,_t,!1,null,null,null),kt=yt.exports;p()(yt,{VAvatar:gt["a"],VCard:_["a"],VCardSubtitle:m["b"],VCardTitle:m["d"],VContainer:O["a"],VDivider:K["a"],VIcon:g["a"],VImg:D["a"],VList:L["a"],VListItem:j["a"],VListItemContent:B["a"],VListItemIcon:J["a"],VListItemTitle:B["b"]});var xt={title:"Home",components:{Home:kt},mounted:function(){this.$emit("update-title","Home")}},St=xt,wt=Object(h["a"])(St,vt,pt,!1,null,null,null),Vt=wt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tabs",{attrs:{grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",{attrs:{href:"#apps"}},[t._v("Apps")]),a("v-tab",{attrs:{href:"#plugins"}},[t._v("Plugins")]),a("v-tab",{attrs:{href:"#entities"}},[t._v("Entities")]),a("v-tab",{attrs:{href:"#threads"}},[t._v("Threads")]),a("v-tab",{attrs:{href:"#callbacks"}},[t._v("Callbacks")]),a("v-tabs-items",{attrs:{value:t.tab}},[a("v-tab-item",{attrs:{value:"apps"}},[a("Apps")],1),a("v-tab-item",{attrs:{value:"plugins"}},[a("Plugins")],1),a("v-tab-item",{attrs:{value:"entities"}},[a("Entities")],1),a("v-tab-item",{attrs:{value:"threads"}},[a("Threads")],1),a("v-tab-item",{attrs:{value:"callbacks"}},[a("Callbacks")],1)],1)],1)},Tt=[],Ct=a("5530"),Et=(a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("SensorBlock",{staticClass:"py-5",attrs:{sensors:this.sensors}}),a("v-divider"),a("EntityTable",{attrs:{name:"Threads",headers:t.thread_headers,items:t.threads}})],1)}),Ot=[],Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-iterator",{staticClass:"mx-auto",attrs:{items:t.sensors,"item-key":"name","items-per-page":4,"hide-default-footer":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.items;return[a("v-row",t._l(s,(function(e,s){return a("v-col",{key:s},[a("v-card",{attrs:{outlined:"","min-height":"50"}},[a("v-card-text",{staticClass:"black--text"},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.text)+":")]),t._v(" "+t._s(e.hasOwnProperty("formatter")?e.formatter(e.state.state):e.state.state)+" ")])],1)],1)})),1)]}}])})},Dt=[],Lt={name:"SensorBlock",mounted:function(){},beforeDestroy:function(){},props:{sensors:Array,name:String},methods:{formatDate:function(t){return this.$UTILS.formatDate(t)}}},jt=Lt,Bt=a("c377"),At=Object(h["a"])(jt,Ut,Dt,!1,null,null,null),It=At.exports;p()(At,{VCard:_["a"],VCardText:m["c"],VCol:E["a"],VDataIterator:Bt["a"],VRow:y["a"]});var qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.filteredItems,"items-per-page":100,dense:"",search:t.search,"sort-by":t.headers[0].value,"hide-default-footer":"","disable-pagination":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-container",[a("v-row",[a("v-col",[t.filterTitle?a("v-select",{attrs:{label:t.filterTitle,items:t.filterKeys},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}}):t._e()],1),a("v-col",[a("v-card-title",{staticClass:"justify-center"},[t._v(t._s(t.name))])],1),a("v-col",[a("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)]},proxy:!0},t._l(t.headers.filter((function(t){return t.hasOwnProperty("formatter")||t.hasOwnProperty("icon")||t.hasOwnProperty("args")||"Name"===t.text})),(function(e,s){return{key:"item."+e.value,fn:function(e){var n=e.header,i=e.value;return[n.hasOwnProperty("formatter")?a("span",{key:s},[t._v(" "+t._s(n.formatter(i))+" ")]):t._e(),"Name"===n.text?a("span",{key:s},[i.match("^sequence.")?a("a",{on:{click:function(e){return t.run_sequence(i)}}},[t._v(t._s(i))]):a("span",[t._v(t._s(i))])]):n.hasOwnProperty("icon")?a("span",{key:s},[a("v-icon",{key:s,attrs:{color:n.icon[i].color}},[t._v(t._s(n.icon[i].icon))])],1):n.hasOwnProperty("args")?a("span",{key:s},[a("Args",{attrs:{title:n.text,args:i}})],1):t._e()]}}}))],null,!0)})],1)},Pt=[],Ft=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",[0===t.argcount?a("span",[t._v(" None ")]):a("span",[t._v(" "+t._s(t.arg_format(t.args))+" ")]),t.argcount>t.args_shown?a("span",[t._v(" "),a("v-btn",{attrs:{"x-small":"",elevation:"0"},on:{click:function(e){t.args_dialog=!0}}},[t._v("...")]),t._v(" } ")],1):t._e()]),a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{width:"90%"},model:{value:t.args_dialog,callback:function(e){t.args_dialog=e},expression:"args_dialog"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-2"},[t._v(" "+t._s(t.title)+" ")]),a("v-card-text",{staticClass:"black--text text-pre"},[a("br"),t._v(" "+t._s(JSON.stringify(t.args,null,4))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.args_dialog=!1}}},[t._v(" OK ")])],1)],1)],1)],1)],1)}),Nt=[],Mt=a("53ca"),Rt={name:"Args",data:function(){return{args_shown:2,args_dialog:!1}},props:["args","title"],mounted:function(){},computed:{argcount:function(){return Array.isArray(this.args)?this.args.length:Object.keys(this.args).length}},methods:{arg_format:function(t){var e=[],a="",s="";if(Array.isArray(t)){a="[",s="]";for(var n=0;n<t.length;n++)e.push('"'+t[n]+'"')}else{if("object"!==Object(Mt["a"])(t))return console.log("Unknown type in arg_format()"),"Error";for(var i in a="{",s="}",t)e.push('"'+i+'": "'+t[i]+'"')}for(var r=a,o=!1,l=0;l<e.length;l++){if(l===this.args_shown){o=!0;break}l>0&&(r+=", "),r+=e[l]}return o||(r+=s),r}}},Ht=Rt,Kt=Object(h["a"])(Ht,Ft,Nt,!1,null,null,null),Jt=Kt.exports;p()(Kt,{VBtn:f["a"],VCard:_["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VContainer:O["a"],VDialog:U["a"],VSpacer:k["a"]});var zt={name:"EntityTable",data:function(){return{search:"",filterValue:this.filterDefault}},components:{Args:Jt},props:{name:String,headers:Array,items:Array,filterKeys:Array,filterTitle:String,filterDefault:String},computed:{filteredItems:function(){var t=this;return this.items.filter((function(e){return!t.filterValue||e.ns===t.filterValue}))}},methods:{run_sequence:function(t){var e="sequence/run",a="rules",s={namespace:"default",entity_id:t};this.$SUBS.stream.call_service(e,a,s)}}},Xt=zt,Yt=a("8fea"),Gt=a("b974"),Qt=Object(h["a"])(Xt,qt,Pt,!1,null,null,null),Wt=Qt.exports;p()(Qt,{VCardTitle:m["d"],VCol:E["a"],VContainer:O["a"],VDataTable:Yt["a"],VIcon:g["a"],VRow:y["a"],VSelect:Gt["a"],VTextField:et["a"]});var Zt={name:"Threads",components:{EntityTable:Wt,SensorBlock:It},title:"Threads",data:function(){var t=this;return{search:"",sensors:[{text:"Current Busy",entity:"admin.sensor.threads_current_busy",state:{state:null}},{text:"Max Busy",entity:"admin.sensor.threads_max_busy",state:{state:null}},{text:"Max Busy Time",entity:"admin.sensor.threads_max_busy_time",state:{state:null},formatter:this.$UTILS.formatDate},{text:"Last Update",entity:"admin.sensor.threads_last_action_time",state:{state:null},formatter:this.$UTILS.formatDate}],thread_headers:[{text:"ID",value:"entity_id",width:"10%"},{text:"Queue Size",value:"qsize",width:"10%"},{text:"Callback",value:"callback",width:"15%",formatter:function(e){return t.$UTILS.formatFixedLen(e,30)}},{text:"Last Active",value:"time_called",width:"15%",formatter:this.$UTILS.formatDate},{text:"Alive",value:"is_alive",width:"10%",icon:{true:{icon:"mdi-checkbox-blank-circle",color:"green"},false:{icon:"mdi-checkbox-blank-circle-outline",color:"red"}}},{text:"Pinned Apps",value:"pinned_apps",args:1}],threads:[],subs:[]}},mounted:function(){for(var t=this,e=0;e<this.sensors.length;e++)this.subs.push(this.$SUBS.add_sub("state",this.sensors[e].entity,(function(e,a,s){t.$UTILS.update_sensor_block(e,a,s,t.sensors)})));this.subs.push(this.$SUBS.add_sub("state","admin.thread",(function(e,a,s){t.$UTILS.update_entity_table(e,a,s,t.threads,t.copy_function)})))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.qsize=e.attributes.q,a.callback=e.state,a.time_called=e.attributes.time_called,a.is_alive=e.attributes.is_alive,a.pinned_apps=e.attributes.pinned_apps,a}}},te=Zt,ee=Object(h["a"])(te,Et,Ot,!1,null,null,null),ae=ee.exports;p()(ee,{VContainer:O["a"],VDivider:K["a"]});var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("EntityTable",{attrs:{name:"Apps",headers:t.app_headers,items:t.apps}})],1)},ne=[],ie=(a("b0c0"),{name:"Apps",components:{EntityTable:Wt},title:"Apps",data:function(){var t=this;return{app_headers:[{text:"Name",value:"name",width:"15%"},{text:"State",value:"state",width:"15%",formatter:function(e){return t.$UTILS.formatFixedLen(e,30)}},{text:"Callbacks (Instance)",value:"instance_callbacks",width:"10%"},{text:"Callbacks (Lifetime)",value:"total_callbacks",width:"10%"},{text:"Arguments",value:"args",args:1}],apps:[],subs:[]}},mounted:function(){var t=this;this.subs.push(this.$SUBS.add_sub("state","admin.app",(function(e,a,s){t.$UTILS.update_entity_table(e,a,s,t.apps,t.copy_function)})))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.name=e.attributes.args.class,a.state=e.state,a.instance_callbacks=e.attributes.instancecallbacks,a.total_callbacks=e.attributes.totalcallbacks,a.args=e.attributes.args,a}}}),re=ie,oe=Object(h["a"])(re,se,ne,!1,null,null,null),le=oe.exports;p()(oe,{VContainer:O["a"]});var ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("SensorBlock",{staticClass:"py-5",attrs:{sensors:this.sensors}}),a("v-divider"),a("EntityTable",{staticClass:"py-5",attrs:{name:"Scheduler Callbacks",headers:t.scheduler_headers,items:t.scheduler_callbacks}}),a("v-divider"),a("EntityTable",{staticClass:"py-5",attrs:{name:"State Callbacks",headers:t.state_headers,items:t.state_callbacks}}),a("v-divider"),a("EntityTable",{staticClass:"py-5",attrs:{name:"Event Callbacks",headers:t.event_headers,items:t.event_callbacks}})],1)},ue=[],de={name:"Callbacks",components:{EntityTable:Wt,SensorBlock:It},title:"Callbacks",data:function(){return{search:"",sensors:[{text:"Total Callbacks Fired",entity:"admin.sensor.callbacks_total_executed",state:{state:null}},{text:"Total Callbacks Executed",entity:"admin.sensor.callbacks_total_fired",state:{state:null}},{text:"Average Callbacks/s Executed",entity:"admin.sensor.callbacks_average_fired",state:{state:null}},{text:"Average Callbacks/s Fired",entity:"admin.sensor.callbacks_average_executed",state:{state:null}}],scheduler_headers:[{text:"App",value:"app",width:"10%"},{text:"Execution Time",value:"execution",width:"15%",formatter:this.$UTILS.formatDate},{text:"Repeat",value:"repeat",width:"10%"},{text:"Callback",value:"callback",width:"10%"},{text:"Fired",value:"fired",width:"8%"},{text:"Executed",value:"executed",width:"8%"},{text:"Pinned",value:"pinned",width:"8%",icon:{true:{icon:"mdi-check",color:"black"},false:{icon:"",color:"black"}}},{text:"Thread",value:"thread",width:"8%"},{text:"Kwargs",value:"kwargs",args:1}],scheduler_callbacks:[],state_headers:[{text:"App",value:"app",width:"10%"},{text:"Last Executed",value:"last_executed",width:"15%",formatter:this.$UTILS.formatDate},{text:"Entity",value:"entity",width:"10%"},{text:"Callback",value:"callback",width:"10%"},{text:"Fired",value:"fired",width:"8%"},{text:"Executed",value:"executed",width:"8%"},{text:"Pinned",value:"pinned",width:"8%",icon:{true:{icon:"mdi-check",color:"black"},false:{icon:"",color:"black"}}},{text:"Thread",value:"thread",width:"8%"},{text:"Kwargs",value:"kwargs",args:1}],state_callbacks:[],event_headers:[{text:"App",value:"app",width:"10%"},{text:"Last Executed",value:"last_executed",width:"15%",formatter:this.$UTILS.formatDate},{text:"Event Name",value:"event",width:"10%"},{text:"Callback",value:"callback",width:"10%"},{text:"Fired",value:"fired",width:"8%"},{text:"Executed",value:"executed",width:"8%"},{text:"Pinned",value:"pinned",width:"8%",icon:{true:{icon:"mdi-check",color:"black"},false:{icon:"",color:"black"}}},{text:"Thread",value:"thread",width:"8%"},{text:"Kwargs",value:"kwargs",args:1}],event_callbacks:[],subs:[]}},mounted:function(){for(var t=this,e=0;e<this.sensors.length;e++)this.subs.push(this.$SUBS.add_sub("state",this.sensors[e].entity,(function(e,a,s){t.$UTILS.update_sensor_block(e,a,s,t.sensors)})));this.subs.push(this.$SUBS.add_sub("state","admin.scheduler_callback",(function(e,a,s){t.$UTILS.update_entity_table(e,a,s,t.scheduler_callbacks,t.scheduler_copy_function)}))),this.subs.push(this.$SUBS.add_sub("state","admin.state_callback",(function(e,a,s){t.$UTILS.update_entity_table(e,a,s,t.state_callbacks,t.state_copy_function)}))),this.subs.push(this.$SUBS.add_sub("state","admin.event_callback",(function(e,a,s){t.$UTILS.update_entity_table(e,a,s,t.event_callbacks,t.event_copy_function)})))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{scheduler_copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.app=e.attributes.app,a.execution=e.attributes.execution_time,a.repeat=e.attributes.repeat,a.callback=e.attributes.function,a.fired=e.attributes.fired,a.executed=e.attributes.executed,a.pinned=e.attributes.pinned,a.thread=e.attributes.pinned_thread,a.kwargs=e.attributes.kwargs,a},state_copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.app=e.attributes.app,a.last_executed=e.last_changed,a.entity=e.attributes.listened_entity,a.callback=e.attributes.function,a.fired=e.attributes.fired,a.executed=e.attributes.executed,a.pinned=e.attributes.pinned,a.thread=e.attributes.pinned_thread,a.kwargs=e.attributes.kwargs,a},event_copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.app=e.attributes.app,a.last_executed=e.last_changed,a.event=e.attributes.event_name,a.callback=e.attributes.function,a.fired=e.attributes.fired,a.executed=e.attributes.executed,a.pinned=e.attributes.pinned,a.thread=e.attributes.pinned_thread,a.kwargs=e.attributes.kwargs,a}}},he=de,ve=Object(h["a"])(he,ce,ue,!1,null,null,null),pe=ve.exports;p()(ve,{VContainer:O["a"],VDivider:K["a"]});var fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("EntityTable",{attrs:{name:"Entities",filterTitle:"Namespace",filterDefault:"admin",filterKeys:t.ns,headers:t.entity_headers,items:t.entities}})],1)},_e=[],me={name:"Entities",components:{EntityTable:Wt},title:"Entities",data:function(){var t=this;return{ns:[],search:"",entity_headers:[{text:"Name",value:"entity_id",width:"30%"},{text:"State",value:"state",width:"15%",formatter:function(e){return t.$UTILS.formatFixedLen(e,30)}},{text:"Last Changed",value:"last_changed",width:"20%",formatter:this.$UTILS.formatDate},{text:"Attributes",value:"attributes",args:1}],entities:[],subs:[]}},mounted:function(){for(var t=this,e=this.$SUBS.get_namespaces(),a=0;a<e.length;a++)this.subs.push(this.$SUBS.add_sub("state",e[a],(function(e,a,s){console.log(t.entities),t.$UTILS.update_entity_table(e,a,s,t.entities,t.copy_function)}))),this.ns.push(e[a]);this.subs.push(this.$SUBS.add_sub("namespace","*",this.process_namespace))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{process_namespace:function(t,e){var a=this;"add"===e&&(this.ns.push(t),this.subs.push(this.$SUBS.add_sub("state",t,(function(t,e,s){a.$UTILS.update_entity_table(t,e,s,a.entities,a.copy_function)}))))},copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.ns=t,a.state=e.state,a.last_changed=e.last_changed,a.attributes=e.attributes,a}}},be=me,ge=Object(h["a"])(be,fe,_e,!1,null,null,null),ye=ge.exports;p()(ge,{VContainer:O["a"]});var ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("EntityTable",{attrs:{name:"Plugins",headers:t.plugin_headers,items:t.plugins}})],1)},xe=[],Se={name:"Plugins",components:{EntityTable:Wt},title:"Plugins",data:function(){var t=this;return{plugin_headers:[{text:"Name",value:"entity_id",width:"15%"},{text:"State",value:"state",width:"15%",formatter:function(e){return t.$UTILS.formatFixedLen(e,30)}},{text:"Callbacks (Instance)",value:"instance_callbacks",width:"10%"},{text:"Callbacks (Lifetime)",value:"total_callbacks",width:"10%"}],plugins:[],subs:[]}},mounted:function(){var t=this;this.subs.push(this.$SUBS.add_sub("state","admin.plugin",(function(e,a,s){t.$UTILS.update_entity_table(e,a,s,t.plugins,t.copy_function)})))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{copy_function:function(t,e,a){return a.entity_id=e.entity_id,a.state=e.state,a.instance_callbacks=e.attributes.instancecallbacks,a.total_callbacks=e.attributes.totalcallbacks,a}}},we=Se,Ve=Object(h["a"])(we,ke,xe,!1,null,null,null),$e=Ve.exports;p()(Ve,{VContainer:O["a"]});var Te={title:"State",components:{Plugins:$e,Threads:ae,Apps:le,Callbacks:pe,Entities:ye},mounted:function(){this.$emit("update-title","State")},computed:{tab:{set:function(t){this.$router.replace({query:Object(Ct["a"])(Object(Ct["a"])({},this.$route.query),{},{tab:t})})},get:function(){return this.$route.query.tab}}}},Ce=Te,Ee=a("71a3"),Oe=a("c671"),Ue=a("fe57"),De=a("aac8"),Le=Object(h["a"])(Ce,$t,Tt,!1,null,null,null),je=Le.exports;p()(Le,{VTab:Ee["a"],VTabItem:Oe["a"],VTabs:Ue["a"],VTabsItems:De["a"]});var Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Events")},Ae=[],Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.filteredItems,"disable-pagination":"","fixed-header":"","hide-default-footer":"","disable-sort":"",dense:"",search:t.search},scopedSlots:t._u([{key:"item.data",fn:function(t){var e=t.item;return[a("json-viewer",{attrs:{value:JSON.stringify(e)}})]}},{key:"item.time_received",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.time_received.toLocaleString())+" ")]}},{key:"top",fn:function(){return[a("v-container",[a("v-row",[a("v-col",[a("v-select",{attrs:{label:"Namespace",items:t.ns},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1),a("v-spacer"),a("v-col",[a("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)]},proxy:!0}])})],1)},qe=[],Pe=a("349e"),Fe=a.n(Pe),Ne={name:"Events",components:{JsonViewer:Fe.a},title:"Events",data:function(){return{search:null,headers:[{text:"Event Type",value:"event_type",width:"10%"},{text:"Namespace",value:"namespace",width:"10%"},{text:"Time Received",value:"time_received",width:"15%"},{text:"Event Data",value:"data"}],items:[],subs:[],ns:[],filterValue:"admin"}},mounted:function(){this.ns=this.$SUBS.get_namespaces(),this.subs.push(this.$SUBS.add_sub("event","*",this.process_event)),this.subs.push(this.$SUBS.add_sub("namespace","*",this.process_namespace))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},computed:{filteredItems:function(){var t=this;return this.items.filter((function(e){return!t.filterValue||e.namespace===t.filterValue}))}},methods:{process_event:function(t){this.items.length>=this.$SUBS.MAX_EVENTS&&this.items.pop(),this.items.unshift(t)},process_namespace:function(t,e){"add"===e&&this.ns.push(t)}}},Me=Ne,Re=Object(h["a"])(Me,Ie,qe,!1,null,null,null),He=Re.exports;p()(Re,{VCol:E["a"],VContainer:O["a"],VDataTable:Yt["a"],VRow:y["a"],VSelect:Gt["a"],VSpacer:k["a"],VTextField:et["a"]});var Ke={title:"Events",components:{Events:He},mounted:function(){this.$emit("update-title","Events")}},Je=Ke,ze=Object(h["a"])(Je,Be,Ae,!1,null,null,null),Xe=ze.exports,Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("App Management")])},Ge=[],Qe={title:"App Management",mounted:function(){this.$emit("update-title","App Management")}},We=Qe,Ze=Object(h["a"])(We,Ye,Ge,!1,null,null,null),ta=Ze.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Dashboards")},aa=[],sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-data-iterator",{attrs:{items:t.items,"sort-by":"dash","disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-row",t._l(e.items,(function(e){return a("v-col",{key:e.dash,attrs:{cols:"12",sm:"12",md:"6",lg:"4"}},[a("a",{attrs:{href:e.link}},[t._v(t._s(e.dash))])])})),1)]}}])})],1)},na=[],ia={name:"Dashboards",mounted:function(){!1===this.$SUBS.connected?this.subs.push(this.$SUBS.add_sub("connect",null,this.connected)):this.$SUBS.stream.list_dashes(this.got_dashes)},components:{},data:function(){return{headers:[{text:"Dashboard",value:"dash"},{text:"Link",value:"link"}],items:[],subs:[]}},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},methods:{connected:function(){this.$SUBS.stream.list_dashes(this.got_dashes)},got_dashes:function(t){var e=this;null!==t.data.dash_list&&Object.keys(t.data.dash_list).forEach((function(a){e.items.push({dash:a,link:t.data.dash_list[a]})}))}}},ra=ia,oa=Object(h["a"])(ra,sa,na,!1,null,null,null),la=oa.exports;p()(oa,{VCol:E["a"],VContainer:O["a"],VDataIterator:Bt["a"],VRow:y["a"]});var ca={components:{Dashboards:la},title:"Dashboards",mounted:function(){this.$emit("update-title","Dashboards")}},ua=ca,da=Object(h["a"])(ua,ea,aa,!1,null,null,null),ha=da.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("Rules")])},pa=[],fa={title:"Rules",mounted:function(){this.$emit("update-title","Logs")}},_a=fa,ma=Object(h["a"])(_a,va,pa,!1,null,null,null),ba=ma.exports,ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("Sequences")])},ya=[],ka={title:"Sequences",mounted:function(){this.$emit("update-title","Sequences")}},xa=ka,Sa=Object(h["a"])(xa,ga,ya,!1,null,null,null),wa=Sa.exports,Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Logs")},$a=[],Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.filteredItems,"disable-pagination":"","fixed-header":"","hide-default-footer":"","disable-sort":"",dense:"",search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-container",[a("v-row",[a("v-col",[a("v-select",{attrs:{label:"Log",items:t.log_names},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1),a("v-spacer"),a("v-col",[a("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)]},proxy:!0}])})],1)},Ca=[],Ea={name:"Logs",title:"Logs",data:function(){return{search:null,headers:[{text:"Log Entry",value:"line"}],items:[],subs:[],logs:[],log_names:[],filterValue:"main_log"}},mounted:function(){this.log_names=this.$SUBS.get_log_list(),this.subs.push(this.$SUBS.add_sub("log","*",this.process_log))},beforeDestroy:function(){this.$SUBS.remove_subs(this.subs)},computed:{filteredItems:function(){var t=this;return this.items.filter((function(e){return!t.filterValue||e.log===t.filterValue}))}},methods:{process_log:function(t,e){"update"===t&&(this.items.length>=this.$SUBS.MAX_LOGS*this.log_names.length&&this.items.pop(),this.items.unshift(e))}}},Oa=Ea,Ua=Object(h["a"])(Oa,Ta,Ca,!1,null,null,null),Da=Ua.exports;p()(Ua,{VCol:E["a"],VContainer:O["a"],VDataTable:Yt["a"],VRow:y["a"],VSelect:Gt["a"],VSpacer:k["a"],VTextField:et["a"]});var La={title:"Logs",components:{Logs:Da},mounted:function(){this.$emit("update-title","Logs")}},ja=La,Ba=Object(h["a"])(ja,Va,$a,!1,null,null,null),Aa=Ba.exports;s["default"].use(ht["a"]);var Ia=[{path:"/",name:"Home",component:Vt},{path:"/state",name:"State",component:je},{path:"/events",name:"Events",component:Xe},{path:"/appmanagement",name:"App Management",component:ta},{path:"/dashboards",name:"Dashboards",component:ha},{path:"/rules",name:"Rules",component:ba},{path:"/sequences",name:"Sequences",component:wa},{path:"/logs",name:"Lgs",component:Aa}],qa=new ht["a"]({routes:Ia}),Pa=qa,Fa=a("f309");s["default"].use(Fa["a"]);var Na=new Fa["a"]({});function Ma(t){var e=t.$options.title;if(e)return"function"===typeof e?e.call(t):e}var Ra={created:function(){var t=Ma(this);t&&(document.title=t)}},Ha=(a("99af"),a("25f0"),a("caad"),a("2532"),a("d096")),Ka=function(){function t(e,a,s,n,i,r,o,l,c,u,d){Object(ct["a"])(this,t),this.client_name=i,this.on_connect=o,this.on_message=l,this.on_disconnect=c,this.on_error=u,this.need_logon=d,this.creds=r,this.outstanding_requests={};var h="";h="ws"===e?"https:"===a?"wss:":"ws:":a;var v=h+"//"+s+":"+n+"/stream";"ws"===e?this.stream=new Ja(v,this.ad_on_connect.bind(this),this.ad_on_message.bind(this),this.ad_on_disconnect.bind(this),this.ad_on_error.bind(this)):alert("Unknown transport",e)}return Object(ut["a"])(t,[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)}))}},{key:"ad_on_connect",value:function(){var t={client_name:this.client_name};""!==this.creds&&(t["cookie"]=this.creds);var e={request_type:"hello",data:t};this.send(e)}},{key:"ad_on_error",value:function(t){this.on_error(t)}},{key:"ad_on_disconnect",value:function(){this.on_disconnect()}},{key:"send",value:function(t,e){var a=this.uuidv4();return t["request_id"]=a,this.outstanding_requests[a]={callback:e,request:t},this.stream.send(t),a}},{key:"ad_on_message",value:function(t){if("response_success"in t&&!1===t.response_success)t.response_error.includes("authorization failed")?this.need_logon():console.log("Error in stream: "+t.response_error,t);else if("response_type"in t)if("listen_state"===t.response_type||"listen_event"===t.response_type);else if("state_changed"===t.response_type||"event"===t.response_type){var e=t.response_id;if(e in this.outstanding_requests){var a=this.outstanding_requests[e].callback;void 0!==a&&a(t)}}else if("hello"===t.response_type){var s=t.response_id;delete this.outstanding_requests[s],this.on_connect(t)}else if("response_id"in t){var n=t.response_id;if(n in this.outstanding_requests){var i=this.outstanding_requests[n].callback;delete this.outstanding_requests[n],void 0!==i&&i(t)}else console.log("Dropping specific callback",t)}else void 0!==this.on_message?this.on_message(t):console.log("Dropping non-specific callback",t);else console.log("Unknown response type",t)}},{key:"listen_state",value:function(t,e,a){var s={request_type:"listen_state",data:{namespace:t,entity_id:e}};return this.send(s,a)}},{key:"listen_event",value:function(t,e,a){var s={request_type:"listen_event",data:{namespace:t,event:e}};return this.send(s,a)}},{key:"cancel_listen_state",value:function(t){console.log(t)}},{key:"cancel_listen_event",value:function(t){console.log(t)}},{key:"get_state",value:function(t,e,a){var s={request_type:"get_state",data:{}};"*"!==t&&(s.data.namespace=t),"*"!==e&&(s.data.entity_id=e),this.send(s,a)}},{key:"call_service",value:function(t,e,a,s){a["__name"]="stream";var n={request_type:"call_service",data:{namespace:e,service:t,data:a}};this.send(n,s)}},{key:"get_logs",value:function(t,e){var a={request_type:"get_logs",data:{}};null!==e&&(a.data.maxlines=e),this.send(a,t)}},{key:"list_dashes",value:function(t){var e={request_type:"list_dashes",data:{}};this.send(e,t)}}]),t}(),Ja=function(){function t(e,a,s,n,i){Object(ct["a"])(this,t),this.on_connect=a,this.on_message=s,this.on_disconnect=n,this.on_error=i,this.webSocket=new Ha["a"](e),this.webSocket.onopen=this.ws_on_connect.bind(this),this.webSocket.onmessage=this.ws_on_message.bind(this),this.webSocket.onclose=this.ws_on_disconnect.bind(this),this.webSocket.onerror=this.ws_on_error.bind(this)}return Object(ut["a"])(t,[{key:"send",value:function(t){this.webSocket.send(JSON.stringify(t))}},{key:"disconnect",value:function(){this.webSocket.close()}},{key:"ws_on_connect",value:function(){this.on_connect()}},{key:"ws_on_message",value:function(t){var e=JSON.parse(t.data);this.on_message(e)}},{key:"ws_on_disconnect",value:function(){this.on_disconnect()}},{key:"ws_on_error",value:function(t){console.log(t),this.on_error(t)}}]),t}(),za=a("c64e"),Xa=a.n(za),Ya=function(){function t(){Object(ct["a"])(this,t),this.host="",this.port=0,this.connected=!1,this.subs=[],this.state=[],this.namespace=[],this.events=[],this.lognames=[],this.logs=[],this.log_list=[],this.max_events=1e3,this.max_logs=1e3}return Object(ut["a"])(t,[{key:"MAX_EVENTS",get:function(){return this.max_events}},{key:"MAX_LOGS",get:function(){return this.max_logs}},{key:"get_namespaces",value:function(){return this.namespace}},{key:"get_log_list",value:function(){return this.log_list}},{key:"set_host",value:function(t,e){this.host=t,this.port=e}},{key:"add_sub",value:function(t,e,a,s){var n=this,i=Xa()();if(this.subs[i]={type:t,spec:e,callback:a,copyfunction:s},"state"===t&&Object.keys(this.state).forEach((function(t){Object.keys(n.state[t]).forEach((function(e){n.process_callback([n.subs[i]],"state","add",n.fqentity(t,e),n.state[t][e])}))})),"event"===t)for(var r=this.events.length-1;r>=0;r--)this.process_callback([this.subs[i]],"event","","",this.events[r]);if("log"===t)for(var o=0;o<this.logs.length;o++)this.process_callback([this.subs[i]],"log","update","",this.logs[o]);return i}},{key:"remove_subs",value:function(t){for(var e=0;e<t.length;e++)t[e]in this.subs?delete this.subs[t[e]]:console.log("Handle not found: "+t[e])}},{key:"fqentity",value:function(t,e){return t+"."+e}},{key:"logout",value:function(){delete localStorage.ad_creds,this.subs=[],this.ad_connect(this.need_logon,"")}},{key:"process_callback",value:function(t,e,a,s,n){var i=this;Object.keys(t).forEach((function(r){var o=t[r];if(o.type===e)if("connect"===e||"namespace"===e)i.subs[r].callback(s,a,n);else if("state"===e){var l=!0;if("*"!==o.spec){var c=o.spec.split("."),u=s.split(".");l=!0;for(var d=0;d<c.length;d++)c[d]!==u[d]&&(l=!1)}l&&t[r].callback(s,a,n,o.copyfunction)}else"log"===e?t[r].callback(a,n):"event"===e&&t[r].callback(n)}))}},{key:"ad_connect",value:function(t,e){this.need_logon=t;var a="";null!==e?(localStorage.ad_creds=e,a=e):localStorage.ad_creds&&(a=localStorage.ad_creds),this.stream=new Ka("ws",location.protocol,this.host,this.port,"Admin Client",a,this.on_connect.bind(this),this.on_message.bind(this),this.on_disconnect.bind(this),this.on_error.bind(this),t)}},{key:"on_error",value:function(t){console.log(t)}},{key:"on_connect",value:function(){this.stream.get_state("*","*",this.got_initial_state.bind(this)),this.stream.get_logs(this.got_logs.bind(this),1e3),this.stream.listen_event("*","*",this.got_event.bind(this)),this.stream.listen_state("*","*",this.got_state_update.bind(this))}},{key:"on_disconnect",value:function(){this.connected=!1,this.process_callback(this.subs,"connect",null,null,this.connected)}},{key:"on_message",value:function(){}},{key:"got_logs",value:function(t){var e=this;Object.keys(t.data).forEach((function(a){var s=[];e.log_list.push(a),e.process_callback(e.subs,"log","add",a);for(var n=0;n<t.data[a].lines.length;n++){var i={log:a,line:t.data[a].lines[n]};s.length>=e.max_logs&&s.splice(),s.push(i)}e.logs=e.logs.concat(s)}));for(var a=0;a<this.logs.length;a++)this.process_callback(this.subs,"log","update","",this.logs[a])}},{key:"got_initial_state",value:function(t){var e=this;Object.keys(t.data).forEach((function(a){e.namespace.push(a),e.process_callback(e.subs,"namespace","add",a),Object.keys(t.data[a]).forEach((function(s){e.process_callback(e.subs,"state","add",e.fqentity(a,s),t.data[a][s])}))})),this.state=t.data,this.connected=!0,this.process_callback(this.subs,"connect",null,null,this.connected)}},{key:"got_event",value:function(t){var e=t.data.namespace,a=t.data.data.entity_id,s=t.data.data.state,n=e+"."+a;if(t.data.time_received=new Date,"__AD_ENTITY_ADDED"===t.data.event_type)this.state[e][a]=s,this.process_callback(this.subs,"state","add",n,s);else if("__AD_ENTITY_REMOVED"===t.data.event_type)delete this.state[e][a],this.process_callback(this.subs,"state","remove",n,s);else if("__AD_LOG_EVENT"===t.data.event_type){var i={log:t.data.data.log_type,line:t.data.data.formatted_message};this.logs.length>=this.max_logs&&this.logs.shift(),this.logs.push(i),this.process_callback(this.subs,"log","update","",i)}else this.events.length>=this.max_events&&this.events.pop(),this.events.unshift(t.data),this.process_callback(this.subs,"event","","",t.data)}},{key:"got_state_update",value:function(t){var e=t.data.namespace,a=t.data.data.entity_id,s=t.data.data.new_state;this.state[e][a]=s;var n=e+"."+a;this.process_callback(this.subs,"state","update",n,s)}}]),t}();s["default"].config.productionTip=!1,s["default"].mixin(Ra),Object.defineProperty(s["default"].prototype,"$SUBS",{value:new Ya}),Object.defineProperty(s["default"].prototype,"$UTILS",{value:new dt}),Object.defineProperty(s["default"].prototype,"$TABS",{value:[{title:"Home",icon:"mdi-home",nav:"/"},{title:"State",icon:"mdi-chemical-weapon",nav:"/state?tab=apps"},{title:"Events",icon:"mdi-arrow-collapse-down",nav:"/events"},{title:"Logs",icon:"mdi-database",nav:"/logs"},{title:"Dashboards",icon:"mdi-tablet-dashboard",nav:"/dashboards"}]}),new s["default"]({router:Pa,vuetify:Na,render:function(t){return t(lt)}}).$mount("#app")},6:function(t,e){},7:function(t,e){},"760c":function(t,e,a){"use strict";a("c3f5")},8:function(t,e){},9:function(t,e){},c3f5:function(t,e,a){}});
//# sourceMappingURL=app.js.map
