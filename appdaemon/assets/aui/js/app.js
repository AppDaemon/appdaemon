(function(t){function e(e){for(var a,r,o=e[0],l=e[1],c=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},n={app:0},i=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/aui/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=s("7496"),i=function(){var t=this,e=t._self._c;return e(n["a"],[e("AUI")],1)},r=[],o=s("8336"),l=s("b0af"),c=s("99d9"),u=s("a523"),d=s("169a"),h=s("f6c4"),_=s("2fa4"),p=s("8654"),b=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e("Drawer"),e("TopBar",{attrs:{title:t.title,connected:t.connected}}),e(h["a"],[e("router-view",{on:{"update-title":t.updateTitle}})],1),e("Footer"),e(d["a"],{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(l["a"],[e(c["d"],[e("span",{staticClass:"headline"},[t._v("Enter Password")])]),e(c["c"],[e(u["a"],[e(p["a"],{attrs:{label:"Password","append-icon":t.value?"mdi-eye":"mdi-eye-off",type:t.value?"password":"text",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.logon_done()},"click:append":()=>t.value=!t.value},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),e(c["a"],[e(_["a"]),e(o["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.logon_done()}}},[t._v(" OK ")])],1)],1)],1)],1)},m=[],f=s("553a"),g=s("132d"),v=s("0fd9"),y=function(){var t=this,e=t._self._c;return e(f["a"],{attrs:{height:"50",color:"indigo",padless:"",app:""}},[e(v["a"],{attrs:{justify:"center","no-gutters":""}},[e(l["a"],{attrs:{color:"indigo",flat:""}},[e(c["c"],[t._v(" Booted: "+t._s(t.booted)+" | Uptime: "+t._s(t.uptime)+" ")])],1),e(_["a"]),t._l(t.icons,(function(s){return e(o["a"],{key:s.name,staticClass:"my-2",attrs:{color:"white",text:"",rounded:""}},[e("a",{attrs:{href:s.url,target:s.target}},[e(g["a"],{attrs:{color:"white",size:"24px"}},[t._v(t._s(s.name))])],1)])}))],2)],1)},x=[],S=(s("14d9"),{name:"Footer",data:()=>({booted:"...",uptime:"...",icons:[{name:"mdi-github",url:"https://github.com/AppDaemon",target:"_blank"},{name:"mdi-text-box",url:"https://appdaemon.readthedocs.io/en/latest/",target:"_blank"},{name:"mdi-discord",url:"https://discord.gg/sgSr79jW5x",target:"_blank"},{name:"mdi-forum",url:"https://community.home-assistant.io/c/third-party/appdaemon/21",target:"_blank"}],subs:[]}),mounted(){this.subs.push(this.$SUBS.add_sub("state","admin.sensor.appdaemon_booted",this.booted_change)),this.subs.push(this.$SUBS.add_sub("state","admin.sensor.appdaemon_uptime",this.uptime_change))},beforeDestroy(){this.$AD.remove_subs(this.subs)},methods:{booted_change(t,e,s){this.booted=new Date(s.state).toLocaleString()},uptime_change(t,e,s){this.uptime=s.state}}}),k=S,w=(s("f7c2"),s("2877")),$=Object(w["a"])(k,y,x,!1,null,null,null),U=$.exports,T=s("40dc"),B=s("62ad"),O=s("adda"),E=s("8860"),A=s("da13"),L=s("5d23"),j=s("e449"),D=s("2a7f"),C=s("3a2f"),q=function(){var t=this,e=t._self._c;return e("div",[e(T["a"],{attrs:{app:"",color:"indigo",dark:"",height:"50"}},[e(u["a"],{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[e(v["a"],{attrs:{"no-gutters":"",align:"center"}},[e(B["a"],[e(D["a"],[t._v("AppDaemon "+t._s(t.version))])],1),e(B["a"],[e(c["d"],{staticClass:"justify-center"},[t._v(" "+t._s(t.title)+" ")])],1),e(B["a"],[e(c["d"],{staticClass:"justify-end"},[t.connected?[e(C["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({},"v-icon",a,!1),s),[t._v("mdi-lan-connect")])]}}],null,!1,1647777282)},[e("span",[t._v("Connected")])])]:[e(C["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(g["a"],t._g(t._b({},"v-icon",a,!1),s),[t._v("mdi-lan-disconnect")])]}}])},[e("span",[t._v("Disconnected")])])],e(j["a"],{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o["a"],t._g(t._b({attrs:{icon:""}},"v-btn",a,!1),s),[e(g["a"],[t._v("mdi-dots-vertical")])],1)]}}])},[e(E["a"],t._l(t.menu,(function(s){return e(A["a"],{key:s.option,on:{click:s.callback}},[e(L["b"],[t._v(t._s(s.option))])],1)})),1)],1)],2)],1)],1)],1)],1),e(d["a"],{attrs:{persistent:"","max-width":"600px"},model:{value:t.about,callback:function(e){t.about=e},expression:"about"}},[e(l["a"],[e(c["d"],{staticClass:"headline grey lighten-2"},[e("span",[t._v("About AppDaemon")])]),e(u["a"],[e(v["a"],[e(B["a"],{attrs:{cols:"4"}},[e(O["a"],{staticClass:"ma-5",attrs:{height:"50",width:"50",src:"appdaemon.png"}})],1),e(B["a"],{attrs:{cols:"8"}},[e(c["d"],{staticClass:"black--text"},[t._v(" AppDaemon ")])],1)],1),e(v["a"],[e(B["a"],{attrs:{cols:"12"}},[e(c["c"],{staticClass:"black--text"},[t._v(" Icons made by "),e("a",{attrs:{href:"http://www.freepik.com",title:"Freepik"}},[t._v("Freepik")]),t._v(" from "),e("a",{attrs:{href:"http://www.flaticon.com",title:"Flaticon"}},[t._v("www.flaticon.com")]),t._v(" is licensed by "),e("a",{attrs:{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"}},[t._v("CC 3.0 BY")])])],1)],1)],1),e(c["a"],[e(_["a"]),e(o["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.about=!1}}},[t._v(" OK ")])],1)],1)],1)],1)},I=[],P={name:"TopBar",data:function(){return{about:!1,connected:!1,version:"",menu:[{option:"Logout",callback:this.logout},{option:"About",callback:this.show_about}],subs:[]}},props:{title:String},mounted(){this.subs.push(this.$SUBS.add_sub("connect",null,this.connect_change)),this.subs.push(this.$SUBS.add_sub("state","admin.sensor.appdaemon_version",this.version_change))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},methods:{connect_change(t,e,s){this.connected=s},version_change(t,e,s){this.version="v"+s.state},logout(){this.$SUBS.logout()},show_about(){this.about=!0}}},V=P,N=Object(w["a"])(V,q,I,!1,null,null,null),M=N.exports,F=s("ce7e"),K=s("34c3"),R=s("f774"),H=function(){var t=this,e=t._self._c;return e(R["a"],{attrs:{app:"","mini-variant":t.mini}},[e(l["a"],{attrs:{flat:"",height:"50"}},[e(A["a"],[e(K["a"],{on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[e(g["a"],[t._v("mdi-menu")])],1),e(L["a"],[e(L["b"],[t._v("MENU")])],1)],1)],1),e(F["a"]),e(E["a"],t._l(this.$TABS,(function(s){return e(A["a"],{key:s.title,attrs:{to:s.nav}},[e(K["a"],[e(g["a"],[t._v(t._s(s.icon))])],1),e(L["a"],[e(L["b"],[t._v(t._s(s.title))])],1)],1)})),1)],1)},J=[],z={name:"Sidebar",data:function(){return{mini:!0,items:[]}},methods:{}},G=z,X=Object(w["a"])(G,H,J,!1,null,null,null),Y=X.exports,Q=s("279c"),W=s.n(Q),Z={name:"adui",components:{Footer:U,TopBar:M,Drawer:Y},data:function(){return{connected:!1,title:"",dialog:!1,password:"",value:String}},methods:{updateTitle(t){this.title=t},need_logon(){this.password="",this.dialog=!0},logon_done(){this.dialog=!1;let t=this.encryptPassword(this.password);this.$SUBS.ad_connect(this.need_logon.bind(this),t)},encryptPassword(t){const e=W.a.genSaltSync(10);return W.a.hashSync(t,e)}},mounted(){let t=window.location.hostname,e=window.location.port,s=window.location.search.substring(1),a=new URLSearchParams(s);null!==a.get("host")&&null!==a.get("port")&&(t=a.get("host"),e=a.get("port")),this.$SUBS.set_host(t,e),this.$SUBS.ad_connect(this.need_logon.bind(this),null)}},tt=Z,et=Object(w["a"])(tt,b,m,!1,null,null,null),st=et.exports,at={name:"adui",components:{AUI:st}},nt=at,it=Object(w["a"])(nt,i,r,!1,null,null,null),rt=it.exports;class ot{formatDate(t){let e="";if("never"!==t){let s=new Date(t);e=s.toLocaleString()}else e=t;return e}formatFixedLen(t,e){let s=String(t),a="";return a=s.length<=e?s+" ".repeat(e-s.length):s.substring(0,e),a}formatArgs(t){let e="";return Object.keys(t).forEach(s=>{e+="|"+s+"="+t[s]}),e+="|",e}update_sensor_block(t,e,s,a){for(let n=0;n<a.length;n++)a[n].entity===t&&(a[n].state=s)}update_entity_table(t,e,s,a,n){let i=t.split("."),r=i[0],o=i[1]+"."+i[2];if("add"===e)a.push(n(r,s,{}));else if("update"===e){for(let l=0;l<a.length;l++)if(a[l].entity_id===o){n(r,s,a[l]);break}}else if("remove"===e){let t=-1;for(let e=0;e<a.length;e++)if(a[e].entity_id===o){t=e;break}-1!==t&&a.splice(t,1)}}intToString(t){t=t.toString().replace(/[^0-9.]/g,"");let e,s=[{v:1,s:"B/s"},{v:1e3,s:"K/s"},{v:1e6,s:"M/s"},{v:1e9,s:"G/s"},{v:1e12,s:"T/s"},{v:1e15,s:"P/s"},{v:1e18,s:"E/s"}];for(e=s.length-1;e>0;e--)if(t>=s[e].v)break;return(t/s[e].v).toFixed(2).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+s[e].s}}var lt=s("8c4f"),ct=function(){var t=this,e=t._self._c;return e("Home")},ut=[],dt=s("8212"),ht=function(){var t=this,e=t._self._c;return e(u["a"],[e(l["a"],{attrs:{color:"white",flat:""}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[e(dt["a"],{staticClass:"ma-3",attrs:{size:"75",tile:""}},[e(O["a"],{attrs:{src:"appdaemon.png"}})],1),e("div",[e(c["d"],{staticClass:"headline text--black"},[t._v(" AppDaemon ")]),e(c["b"],[t._v("Sandboxed python Apps for Home Automation")])],1)],1)]),e(F["a"]),e("div",{staticClass:"py-5"},[e(E["a"],t._l(this.$TABS,(function(s){return e(A["a"],{key:s.title,attrs:{to:s.nav}},[e(K["a"],[e(g["a"],[t._v(t._s(s.icon))])],1),e(L["a"],[e(L["b"],[t._v(t._s(s.title))])],1)],1)})),1)],1)],1)},_t=[],pt={name:"Home"},bt=pt,mt=Object(w["a"])(bt,ht,_t,!1,null,null,null),ft=mt.exports,gt={title:"Home",components:{Home:ft},mounted(){this.$emit("update-title","Home")}},vt=gt,yt=Object(w["a"])(vt,ct,ut,!1,null,null,null),xt=yt.exports,St=s("71a3"),kt=s("c671"),wt=s("fe57"),$t=s("aac8"),Ut=function(){var t=this,e=t._self._c;return e(wt["a"],{attrs:{grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(St["a"],{attrs:{href:"#apps"}},[t._v("Apps")]),e(St["a"],{attrs:{href:"#plugins"}},[t._v("Plugins")]),e(St["a"],{attrs:{href:"#entities"}},[t._v("Entities")]),e(St["a"],{attrs:{href:"#threads"}},[t._v("Threads")]),e(St["a"],{attrs:{href:"#callbacks"}},[t._v("Callbacks")]),e($t["a"],{attrs:{value:t.tab}},[e(kt["a"],{attrs:{value:"apps"}},[e("Apps")],1),e(kt["a"],{attrs:{value:"plugins"}},[e("Plugins")],1),e(kt["a"],{attrs:{value:"entities"}},[e("Entities")],1),e(kt["a"],{attrs:{value:"threads"}},[e("Threads")],1),e(kt["a"],{attrs:{value:"callbacks"}},[e("Callbacks")],1)],1)],1)},Tt=[],Bt=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e("SensorBlock",{staticClass:"py-5",attrs:{sensors:this.sensors}}),e(F["a"]),e("EntityTable",{attrs:{name:"Threads",headers:t.thread_headers,items:t.threads}})],1)},Ot=[],Et=s("c377"),At=function(){var t=this,e=t._self._c;return e(Et["a"],{staticClass:"mx-auto",attrs:{items:t.sensors,"item-key":"name","items-per-page":4,"hide-default-footer":""},scopedSlots:t._u([{key:"default",fn:function({items:s}){return[e(v["a"],t._l(s,(function(s,a){return e(B["a"],{key:a},[e(l["a"],{attrs:{outlined:"","min-height":"50"}},[e(c["c"],{staticClass:"black--text"},[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(s.text)+":")]),t._v(" "+t._s(s.hasOwnProperty("formatter")?s.formatter(s.state.state):s.state.state)+" ")])],1)],1)})),1)]}}])})},Lt=[],jt={name:"SensorBlock",mounted(){},beforeDestroy(){},props:{sensors:Array,name:String},methods:{formatDate(t){return this.$UTILS.formatDate(t)}}},Dt=jt,Ct=Object(w["a"])(Dt,At,Lt,!1,null,null,null),qt=Ct.exports,It=s("8fea"),Pt=s("b974"),Vt=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e(It["a"],{attrs:{headers:t.headers,items:t.filteredItems,"items-per-page":100,dense:"",search:t.search,"sort-by":t.headers[0].value,"hide-default-footer":"","disable-pagination":""},scopedSlots:t._u([{key:"top",fn:function(){return[e(u["a"],[e(v["a"],[e(B["a"],[t.filterTitle?e(Pt["a"],{attrs:{label:t.filterTitle,items:t.filterKeys},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}}):t._e()],1),e(B["a"],[e(c["d"],{staticClass:"justify-center"},[t._v(t._s(t.name))])],1),e(B["a"],[e(p["a"],{attrs:{"prepend-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)]},proxy:!0},t._l(t.headers.filter(t=>t.hasOwnProperty("formatter")||t.hasOwnProperty("icon")||t.hasOwnProperty("args")||"Name"===t.text),(function(s,a){return{key:"item."+s.value,fn:function({header:s,value:n}){return[s.hasOwnProperty("formatter")?e("span",{key:a},[t._v(" "+t._s(s.formatter(n))+" ")]):t._e(),"Name"===s.text?e("span",{key:a},[n.match("^sequence.")?e("a",{on:{click:function(e){return t.run_sequence(n)}}},[t._v(t._s(n))]):e("span",[t._v(t._s(n))])]):s.hasOwnProperty("icon")?e("span",{key:a},[e(g["a"],{key:a,attrs:{color:s.icon[n].color}},[t._v(t._s(s.icon[n].icon))])],1):s.hasOwnProperty("args")?e("span",{key:a},[e("Args",{attrs:{title:s.text,args:n}})],1):t._e()]}}}))],null,!0)})],1)},Nt=[],Mt=function(){var t=this,e=t._self._c;return e("div",[e(u["a"],[0===t.argcount?e("span",[t._v(" None ")]):e("span",[t._v(" "+t._s(t.arg_format(t.args))+" ")]),t.argcount>t.args_shown?e("span",[t._v("   "),e(o["a"],{attrs:{"x-small":"",elevation:"0"},on:{click:function(e){t.args_dialog=!0}}},[t._v("...")]),t._v("  } ")],1):t._e()]),e("div",{staticClass:"text-center"},[e(d["a"],{attrs:{width:"90%"},model:{value:t.args_dialog,callback:function(e){t.args_dialog=e},expression:"args_dialog"}},[e(l["a"],[e(c["d"],{staticClass:"grey lighten-2"},[t._v(" "+t._s(t.title)+" ")]),e(c["c"],{staticClass:"black--text text-pre"},[e("br"),t._v(" "+t._s(JSON.stringify(t.args,null,4))+" ")]),e(c["a"],[e(_["a"]),e(o["a"],{attrs:{color:"primary",text:""},on:{click:function(e){t.args_dialog=!1}}},[t._v(" OK ")])],1)],1)],1)],1)],1)},Ft=[],Kt={name:"Args",data:()=>({args_shown:2,args_dialog:!1}),props:["args","title"],mounted(){},computed:{argcount:function(){return Array.isArray(this.args)?this.args.length:Object.keys(this.args).length}},methods:{arg_format(t){let e=[],s="",a="";if(Array.isArray(t)){s="[",a="]";for(let s=0;s<t.length;s++)e.push('"'+t[s]+'"')}else{if("object"!==typeof t)return console.log("Unknown type in arg_format()"),"Error";s="{",a="}";for(const s in t)e.push('"'+s+'": "'+t[s]+'"')}let n=s,i=!1;for(let r=0;r<e.length;r++){if(r===this.args_shown){i=!0;break}r>0&&(n+=", "),n+=e[r]}return i||(n+=a),n}}},Rt=Kt,Ht=Object(w["a"])(Rt,Mt,Ft,!1,null,null,null),Jt=Ht.exports,zt={name:"EntityTable",data:function(){return{search:"",filterValue:this.filterDefault}},components:{Args:Jt},props:{name:String,headers:Array,items:Array,filterKeys:Array,filterTitle:String,filterDefault:String},computed:{filteredItems(){return this.items.filter(t=>!this.filterValue||t.ns===this.filterValue)}},methods:{run_sequence(t){let e="sequence/run",s="rules",a={namespace:"default",entity_id:t};this.$SUBS.stream.call_service(e,s,a)}}},Gt=zt,Xt=Object(w["a"])(Gt,Vt,Nt,!1,null,null,null),Yt=Xt.exports,Qt={name:"Threads",components:{EntityTable:Yt,SensorBlock:qt},title:"Threads",data:function(){return{search:"",sensors:[{text:"Current Busy",entity:"admin.sensor.threads_current_busy",state:{state:null}},{text:"Max Busy",entity:"admin.sensor.threads_max_busy",state:{state:null}},{text:"Max Busy Time",entity:"admin.sensor.threads_max_busy_time",state:{state:null},formatter:this.$UTILS.formatDate},{text:"Last Update",entity:"admin.sensor.threads_last_action_time",state:{state:null},formatter:this.$UTILS.formatDate}],thread_headers:[{text:"ID",value:"entity_id",width:"10%"},{text:"Queue Size",value:"qsize",width:"10%"},{text:"Callback",value:"callback",width:"15%",formatter:t=>this.$UTILS.formatFixedLen(t,30)},{text:"Last Active",value:"time_called",width:"15%",formatter:this.$UTILS.formatDate},{text:"Alive",value:"is_alive",width:"10%",icon:{true:{icon:"mdi-checkbox-blank-circle",color:"green"},false:{icon:"mdi-checkbox-blank-circle-outline",color:"red"}}},{text:"Pinned Apps",value:"pinned_apps",args:1}],threads:[],subs:[]}},mounted(){for(let t=0;t<this.sensors.length;t++)this.subs.push(this.$SUBS.add_sub("state",this.sensors[t].entity,(t,e,s)=>{this.$UTILS.update_sensor_block(t,e,s,this.sensors)}));this.subs.push(this.$SUBS.add_sub("state","admin.thread",(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.threads,this.copy_function)})),this.subs.push(this.$SUBS.add_sub("connect","*",this.connect))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},methods:{copy_function(t,e,s){return s.entity_id=e.entity_id,s.qsize=e.attributes.q,s.callback=e.state,s.time_called=e.attributes.time_called,s.is_alive=e.attributes.is_alive,s.pinned_apps=e.attributes.pinned_apps,s},connect(t,e,s){!1===s&&(this.threads=[])}}},Wt=Qt,Zt=Object(w["a"])(Wt,Bt,Ot,!1,null,null,null),te=Zt.exports,ee=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e("EntityTable",{attrs:{name:"Apps",headers:t.app_headers,items:t.apps}})],1)},se=[],ae={name:"Apps",components:{EntityTable:Yt},title:"Apps",data:function(){return{app_headers:[{text:"Name",value:"name",width:"15%"},{text:"State",value:"state",width:"15%",formatter:t=>this.$UTILS.formatFixedLen(t,30)},{text:"Callbacks (Instance)",value:"instance_callbacks",width:"10%"},{text:"Callbacks (Lifetime)",value:"total_callbacks",width:"10%"},{text:"Arguments",value:"args",args:1}],apps:[],subs:[]}},mounted(){this.subs.push(this.$SUBS.add_sub("state","admin.app",(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.apps,this.copy_function)})),this.subs.push(this.$SUBS.add_sub("connect","*",this.connect))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},methods:{copy_function(t,e,s){return s.entity_id=e.entity_id,s.name=e.attributes.args.class,s.state=e.state,s.instance_callbacks=e.attributes.instancecallbacks,s.total_callbacks=e.attributes.totalcallbacks,s.args=e.attributes.args,s},connect(t,e,s){!1===s&&(this.apps=[])}}},ne=ae,ie=Object(w["a"])(ne,ee,se,!1,null,null,null),re=ie.exports,oe=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e("SensorBlock",{staticClass:"py-5",attrs:{sensors:this.sensors}}),e(F["a"]),e("EntityTable",{staticClass:"py-5",attrs:{name:"Scheduler Callbacks",headers:t.scheduler_headers,items:t.scheduler_callbacks}}),e(F["a"]),e("EntityTable",{staticClass:"py-5",attrs:{name:"State Callbacks",headers:t.state_headers,items:t.state_callbacks}}),e(F["a"]),e("EntityTable",{staticClass:"py-5",attrs:{name:"Event Callbacks",headers:t.event_headers,items:t.event_callbacks}})],1)},le=[],ce={name:"Callbacks",components:{EntityTable:Yt,SensorBlock:qt},title:"Callbacks",data:function(){return{search:"",sensors:[{text:"Total Callbacks Fired",entity:"admin.sensor.callbacks_total_executed",state:{state:null}},{text:"Total Callbacks Executed",entity:"admin.sensor.callbacks_total_fired",state:{state:null}},{text:"Average Callbacks/s Executed",entity:"admin.sensor.callbacks_average_fired",state:{state:null}},{text:"Average Callbacks/s Fired",entity:"admin.sensor.callbacks_average_executed",state:{state:null}}],scheduler_headers:[{text:"App",value:"app",width:"10%"},{text:"Execution Time",value:"execution",width:"15%",formatter:this.$UTILS.formatDate},{text:"Repeat",value:"repeat",width:"10%"},{text:"Callback",value:"callback",width:"10%"},{text:"Fired",value:"fired",width:"8%"},{text:"Executed",value:"executed",width:"8%"},{text:"Pinned",value:"pinned",width:"8%",icon:{true:{icon:"mdi-check",color:"black"},false:{icon:"",color:"black"}}},{text:"Thread",value:"thread",width:"8%"},{text:"Kwargs",value:"kwargs",args:1}],scheduler_callbacks:[],state_headers:[{text:"App",value:"app",width:"10%"},{text:"Last Executed",value:"last_executed",width:"15%",formatter:this.$UTILS.formatDate},{text:"Entity",value:"entity",width:"10%"},{text:"Callback",value:"callback",width:"10%"},{text:"Fired",value:"fired",width:"8%"},{text:"Executed",value:"executed",width:"8%"},{text:"Pinned",value:"pinned",width:"8%",icon:{true:{icon:"mdi-check",color:"black"},false:{icon:"",color:"black"}}},{text:"Thread",value:"thread",width:"8%"},{text:"Kwargs",value:"kwargs",args:1}],state_callbacks:[],event_headers:[{text:"App",value:"app",width:"10%"},{text:"Last Executed",value:"last_executed",width:"15%",formatter:this.$UTILS.formatDate},{text:"Event Name",value:"event",width:"10%"},{text:"Callback",value:"callback",width:"10%"},{text:"Fired",value:"fired",width:"8%"},{text:"Executed",value:"executed",width:"8%"},{text:"Pinned",value:"pinned",width:"8%",icon:{true:{icon:"mdi-check",color:"black"},false:{icon:"",color:"black"}}},{text:"Thread",value:"thread",width:"8%"},{text:"Kwargs",value:"kwargs",args:1}],event_callbacks:[],subs:[]}},mounted(){for(let t=0;t<this.sensors.length;t++)this.subs.push(this.$SUBS.add_sub("state",this.sensors[t].entity,(t,e,s)=>{this.$UTILS.update_sensor_block(t,e,s,this.sensors)}));this.subs.push(this.$SUBS.add_sub("state","admin.scheduler_callback",(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.scheduler_callbacks,this.scheduler_copy_function)})),this.subs.push(this.$SUBS.add_sub("state","admin.state_callback",(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.state_callbacks,this.state_copy_function)})),this.subs.push(this.$SUBS.add_sub("state","admin.event_callback",(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.event_callbacks,this.event_copy_function)})),this.subs.push(this.$SUBS.add_sub("connect","*",this.connect))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},methods:{scheduler_copy_function(t,e,s){return s.entity_id=e.entity_id,s.app=e.attributes.app,s.execution=e.attributes.execution_time,s.repeat=e.attributes.repeat,s.callback=e.attributes.function,s.fired=e.attributes.fired,s.executed=e.attributes.executed,s.pinned=e.attributes.pinned,s.thread=e.attributes.pinned_thread,s.kwargs=e.attributes.kwargs,s},connect(t,e,s){!1===s&&(this.scheduler_callbacks=[],this.state_callbacks=[],this.event_callbacks=[])},state_copy_function(t,e,s){return s.entity_id=e.entity_id,s.app=e.attributes.app,s.last_executed=e.last_changed,s.entity=e.attributes.listened_entity,s.callback=e.attributes.function,s.fired=e.attributes.fired,s.executed=e.attributes.executed,s.pinned=e.attributes.pinned,s.thread=e.attributes.pinned_thread,s.kwargs=e.attributes.kwargs,s},event_copy_function(t,e,s){return s.entity_id=e.entity_id,s.app=e.attributes.app,s.last_executed=e.last_changed,s.event=e.attributes.event_name,s.callback=e.attributes.function,s.fired=e.attributes.fired,s.executed=e.attributes.executed,s.pinned=e.attributes.pinned,s.thread=e.attributes.pinned_thread,s.kwargs=e.attributes.kwargs,s}}},ue=ce,de=Object(w["a"])(ue,oe,le,!1,null,null,null),he=de.exports,_e=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e("EntityTable",{attrs:{name:"Entities",filterTitle:"Namespace",filterDefault:"admin",filterKeys:t.ns,headers:t.entity_headers,items:t.entities}})],1)},pe=[],be={name:"Entities",components:{EntityTable:Yt},title:"Entities",data:function(){return{ns:[],search:"",entity_headers:[{text:"Name",value:"entity_id",width:"30%"},{text:"State",value:"state",width:"15%",formatter:t=>this.$UTILS.formatFixedLen(t,30)},{text:"Last Changed",value:"last_changed",width:"20%",formatter:this.$UTILS.formatDate},{text:"Attributes",value:"attributes",args:1}],entities:[],subs:[],connect_subs:[]}},mounted(){this.connect_subs.push(this.$SUBS.add_sub("connect","*",this.connect))},beforeDestroy(){this.$SUBS.remove_subs(this.subs),this.$SUBS.remove_subs(this.connect_subs)},methods:{process_namespace(t,e){"add"===e&&(this.ns.push(t),this.subs.push(this.$SUBS.add_sub("state",t,(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.entities,this.copy_function)})))},copy_function(t,e,s){return s.entity_id=e.entity_id,s.ns=t,s.state=e.state,s.last_changed=e.last_changed,s.attributes=e.attributes,s},connect(t,e,s){if(!1===s)this.entities=[],this.ns=[],this.$SUBS.remove_subs(this.subs),this.subs=[];else{this.ns=[];let t=this.$SUBS.get_namespaces();for(let e=0;e<t.length;e++)this.subs.push(this.$SUBS.add_sub("state",t[e],(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.entities,this.copy_function)})),this.ns.push(t[e]);this.subs.push(this.$SUBS.add_sub("namespace","*",this.process_namespace))}}}},me=be,fe=Object(w["a"])(me,_e,pe,!1,null,null,null),ge=fe.exports,ve=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e("EntityTable",{attrs:{name:"Plugins",headers:t.plugin_headers,items:t.plugins}})],1)},ye=[],xe={name:"Plugins",components:{EntityTable:Yt},title:"Plugins",data:function(){return{plugin_headers:[{text:"Name",value:"entity_id",width:"15%"},{text:"State",value:"state",width:"15%",formatter:t=>this.$UTILS.formatFixedLen(t,30)},{text:"Requests Sent/s",value:"requests_sent_ps",width:"10%"},{text:"Updates Recv/s",value:"updates_recv_ps",width:"10%"},{text:"Bytes Sent",value:"bytes_sent_ps",width:"10%"},{text:"Bytes Recv",value:"bytes_recv_ps",width:"10%"}],plugins:[],subs:[]}},mounted(){this.subs.push(this.$SUBS.add_sub("connect","*",this.connect)),this.subs.push(this.$SUBS.add_sub("state","admin.plugin",(t,e,s)=>{this.$UTILS.update_entity_table(t,e,s,this.plugins,this.copy_function)}))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},methods:{copy_function(t,e,s){return s.entity_id=e.entity_id,s.state=e.state,s.requests_sent_ps=e.attributes.requests_sent_ps,s.updates_recv_ps=e.attributes.updates_recv_ps,s.bytes_sent_ps=this.$UTILS.intToString(e.attributes.bytes_sent_ps),s.bytes_recv_ps=this.$UTILS.intToString(e.attributes.bytes_recv_ps),s},connect(t,e,s){!1===s&&(this.plugins=[])}}},Se=xe,ke=Object(w["a"])(Se,ve,ye,!1,null,null,null),we=ke.exports,$e={title:"State",components:{Plugins:we,Threads:te,Apps:re,Callbacks:he,Entities:ge},mounted(){this.$emit("update-title","State")},computed:{tab:{set(t){this.$router.replace({query:{...this.$route.query,tab:t}})},get(){return this.$route.query.tab}}}},Ue=$e,Te=Object(w["a"])(Ue,Ut,Tt,!1,null,null,null),Be=Te.exports,Oe=function(){var t=this,e=t._self._c;return e("Events")},Ee=[],Ae=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e(It["a"],{attrs:{headers:t.headers,items:t.filteredItems,"disable-pagination":"","fixed-header":"","hide-default-footer":"","disable-sort":"",dense:"",search:t.search},scopedSlots:t._u([{key:"item.data",fn:function({item:t}){return[e("json-viewer",{attrs:{value:JSON.stringify(t)}})]}},{key:"item.time_received",fn:function({item:e}){return[t._v(" "+t._s(e.time_received.toLocaleString())+" ")]}},{key:"top",fn:function(){return[e(u["a"],[e(v["a"],[e(B["a"],[e(Pt["a"],{attrs:{label:"Namespace",items:t.ns},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1),e(_["a"]),e(B["a"],[e(p["a"],{attrs:{"prepend-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)]},proxy:!0}])})],1)},Le=[],je=(s("3c65"),s("349e")),De=s.n(je),Ce={name:"Events",components:{JsonViewer:De.a},title:"Events",data:function(){return{search:null,headers:[{text:"Event Type",value:"event_type",width:"10%"},{text:"Namespace",value:"namespace",width:"10%"},{text:"Time Received",value:"time_received",width:"15%"},{text:"Event Data",value:"data"}],items:[],subs:[],ns:[],filterValue:"admin"}},mounted(){this.ns=this.$SUBS.get_namespaces(),this.subs.push(this.$SUBS.add_sub("event","*",this.process_event)),this.subs.push(this.$SUBS.add_sub("namespace","*",this.process_namespace)),this.subs.push(this.$SUBS.add_sub("connect","*",this.connect))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},computed:{filteredItems(){return this.items.filter(t=>!this.filterValue||t.namespace===this.filterValue)}},methods:{process_event(t){this.items.length>=this.$SUBS.MAX_EVENTS&&this.items.pop(),this.items.unshift(t)},process_namespace(t,e){"add"===e&&this.ns.push(t)},connect(t,e,s){!1===s&&(this.plugins=[])}}},qe=Ce,Ie=Object(w["a"])(qe,Ae,Le,!1,null,null,null),Pe=Ie.exports,Ve={title:"Events",components:{Events:Pe},mounted(){this.$emit("update-title","Events")}},Ne=Ve,Me=Object(w["a"])(Ne,Oe,Ee,!1,null,null,null),Fe=Me.exports,Ke=function(){var t=this,e=t._self._c;return e("h1",[t._v("App Management")])},Re=[],He={title:"App Management",mounted(){this.$emit("update-title","App Management")}},Je=He,ze=Object(w["a"])(Je,Ke,Re,!1,null,null,null),Ge=ze.exports,Xe=function(){var t=this,e=t._self._c;return e("Dashboards")},Ye=[],Qe=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e(Et["a"],{attrs:{items:t.items,"sort-by":"dash","disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"default",fn:function(s){return[e(v["a"],t._l(s.items,(function(s){return e(B["a"],{key:s.dash,attrs:{cols:"12",sm:"12",md:"6",lg:"4"}},[e("a",{attrs:{href:s.link}},[t._v(t._s(s.dash))])])})),1)]}}])})],1)},We=[],Ze={name:"Dashboards",mounted(){!1===this.$SUBS.connected?this.subs.push(this.$SUBS.add_sub("connect",null,this.connected)):this.$SUBS.stream.list_dashes(this.got_dashes)},components:{},data:function(){return{headers:[{text:"Dashboard",value:"dash"},{text:"Link",value:"link"}],items:[],subs:[]}},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},methods:{connected(){this.$SUBS.stream.list_dashes(this.got_dashes)},got_dashes(t){null!==t.data.dash_list&&Object.keys(t.data.dash_list).forEach(e=>{this.items.push({dash:e,link:t.data.dash_list[e]})})}}},ts=Ze,es=Object(w["a"])(ts,Qe,We,!1,null,null,null),ss=es.exports,as={components:{Dashboards:ss},title:"Dashboards",mounted(){this.$emit("update-title","Dashboards")}},ns=as,is=Object(w["a"])(ns,Xe,Ye,!1,null,null,null),rs=is.exports,os=function(){var t=this,e=t._self._c;return e("h1",[t._v("Rules")])},ls=[],cs={title:"Rules",mounted(){this.$emit("update-title","Logs")}},us=cs,ds=Object(w["a"])(us,os,ls,!1,null,null,null),hs=ds.exports,_s=function(){var t=this,e=t._self._c;return e("h1",[t._v("Sequences")])},ps=[],bs={title:"Sequences",mounted(){this.$emit("update-title","Sequences")}},ms=bs,fs=Object(w["a"])(ms,_s,ps,!1,null,null,null),gs=fs.exports,vs=function(){var t=this,e=t._self._c;return e("Logs")},ys=[],xs=function(){var t=this,e=t._self._c;return e(u["a"],{attrs:{fluid:""}},[e(It["a"],{attrs:{headers:t.headers,items:t.filteredItems,"disable-pagination":"","fixed-header":"","hide-default-footer":"","disable-sort":"",dense:"",search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[e(u["a"],[e(v["a"],[e(B["a"],[e(Pt["a"],{attrs:{label:"Log",items:t.log_names},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1),e(_["a"]),e(B["a"],[e(p["a"],{attrs:{"prepend-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)]},proxy:!0}])})],1)},Ss=[],ks={name:"Logs",title:"Logs",data:function(){return{search:null,headers:[{text:"Log Entry",value:"line"}],items:[],subs:[],logs:[],log_names:[],filterValue:"main_log"}},mounted(){this.log_names=this.$SUBS.get_log_list(),this.subs.push(this.$SUBS.add_sub("connect","*",this.connect)),this.subs.push(this.$SUBS.add_sub("log","*",this.process_log))},beforeDestroy(){this.$SUBS.remove_subs(this.subs)},computed:{filteredItems(){return this.items.filter(t=>!this.filterValue||t.log===this.filterValue)}},methods:{process_log(t,e){"update"===t&&(this.items.length>=this.$SUBS.MAX_LOGS*this.log_names.length&&this.items.pop(),this.items.unshift(e))},connect(t,e,s){!1===s&&(this.items=[])}}},ws=ks,$s=Object(w["a"])(ws,xs,Ss,!1,null,null,null),Us=$s.exports,Ts={title:"Logs",components:{Logs:Us},mounted(){this.$emit("update-title","Logs")}},Bs=Ts,Os=Object(w["a"])(Bs,vs,ys,!1,null,null,null),Es=Os.exports;a["default"].use(lt["a"]);const As=[{path:"/",name:"Home",component:xt},{path:"/state",name:"State",component:Be},{path:"/events",name:"Events",component:Fe},{path:"/appmanagement",name:"App Management",component:Ge},{path:"/dashboards",name:"Dashboards",component:rs},{path:"/rules",name:"Rules",component:hs},{path:"/sequences",name:"Sequences",component:gs},{path:"/logs",name:"Lgs",component:Es}],Ls=new lt["a"]({routes:As});var js=Ls,Ds=s("f309");a["default"].use(Ds["a"]);var Cs=new Ds["a"]({});function qs(t){const{title:e}=t.$options;if(e)return"function"===typeof e?e.call(t):e}var Is={created(){const t=qs(this);t&&(document.title=t)}},Ps=s("d096");class Vs{constructor(t,e,s,a,n,i,r,o,l,c,u){this.client_name=n,this.on_connect=r,this.on_message=o,this.on_disconnect=l,this.on_error=c,this.need_logon=u,this.creds=i,this.outstanding_requests={};let d="";d="ws"===t?"https:"===e?"wss:":"ws:":e;let h=d+"//"+s+":"+a+"/stream";"ws"===t?this.stream=new Ns(h,this.ad_on_connect.bind(this),this.ad_on_message.bind(this),this.ad_on_disconnect.bind(this),this.ad_on_error.bind(this)):alert("Unknown transport",t)}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,s="x"===t?e:3&e|8;return s.toString(16)}))}ad_on_connect(){var t={client_name:this.client_name};""!==this.creds&&(t["cookie"]=this.creds);var e={request_type:"hello",data:t};this.send(e)}ad_on_error(t){this.on_error(t)}ad_on_disconnect(){this.on_disconnect()}send(t,e){let s=this.uuidv4();return t["request_id"]=s,this.outstanding_requests[s]={callback:e,request:t},this.stream.send(t),s}ad_on_message(t){if("response_success"in t&&!1===t.response_success)t.response_error.includes("authorization failed")?this.need_logon():console.log("Error in stream: "+t.response_error,t);else if("response_type"in t)if("listen_state"===t.response_type||"listen_event"===t.response_type);else if("state_changed"===t.response_type||"event"===t.response_type){let e=t.response_id;if(e in this.outstanding_requests){let s=this.outstanding_requests[e].callback;void 0!==s&&s(t)}}else if("hello"===t.response_type){let e=t.response_id;delete this.outstanding_requests[e],this.on_connect(t)}else if("response_id"in t){let e=t.response_id;if(e in this.outstanding_requests){let s=this.outstanding_requests[e].callback;delete this.outstanding_requests[e],void 0!==s&&s(t)}else console.log("Dropping specific callback",t)}else void 0!==this.on_message?this.on_message(t):console.log("Dropping non-specific callback",t);else console.log("Unknown response type",t)}listen_state(t,e,s){let a={request_type:"listen_state",data:{namespace:t,entity_id:e}};return this.send(a,s)}listen_event(t,e,s){var a={request_type:"listen_event",data:{namespace:t,event:e}};return this.send(a,s)}cancel_listen_state(t){console.log(t)}cancel_listen_event(t){console.log(t)}get_state(t,e,s){var a={request_type:"get_state",data:{}};"*"!==t&&(a.data.namespace=t),"*"!==e&&(a.data.entity_id=e),this.send(a,s)}call_service(t,e,s,a){s["__name"]="stream";let n={request_type:"call_service",data:{namespace:e,service:t,data:s}};this.send(n,a)}get_logs(t,e){var s={request_type:"get_logs",data:{}};null!==e&&(s.data.maxlines=e),this.send(s,t)}list_dashes(t){var e={request_type:"list_dashes",data:{}};this.send(e,t)}}class Ns{constructor(t,e,s,a,n){this.on_connect=e,this.on_message=s,this.on_disconnect=a,this.on_error=n,this.webSocket=new Ps["a"](t),this.webSocket.onopen=this.ws_on_connect.bind(this),this.webSocket.onmessage=this.ws_on_message.bind(this),this.webSocket.onclose=this.ws_on_disconnect.bind(this),this.webSocket.onerror=this.ws_on_error.bind(this)}send(t){this.webSocket.send(JSON.stringify(t))}disconnect(){this.webSocket.close()}ws_on_connect(){this.on_connect()}ws_on_message(t){var e=JSON.parse(t.data);this.on_message(e)}ws_on_disconnect(){this.on_disconnect()}ws_on_error(t){console.log(t),this.on_error(t)}}var Ms=s("ec26");class Fs{constructor(){this.host="",this.port=0,this.connected=!1,this.subs=[],this.state=[],this.namespace=[],this.events=[],this.lognames=[],this.logs=[],this.log_list=[],this.max_events=1e3,this.max_logs=1e3}get MAX_EVENTS(){return this.max_events}get MAX_LOGS(){return this.max_logs}get_namespaces(){return this.namespace}get_log_list(){return this.log_list}set_host(t,e){this.host=t,this.port=e}add_sub(t,e,s,a){var n=Object(Ms["a"])();if(this.subs[n]={type:t,spec:e,callback:s,copyfunction:a},"state"===t&&Object.keys(this.state).forEach(t=>{Object.keys(this.state[t]).forEach(e=>{this.process_callback([this.subs[n]],"state","add",this.fqentity(t,e),this.state[t][e])})}),"event"===t)for(let i=this.events.length-1;i>=0;i--)this.process_callback([this.subs[n]],"event","","",this.events[i]);if("log"===t)for(let i=0;i<this.logs.length;i++)this.process_callback([this.subs[n]],"log","update","",this.logs[i]);return n}remove_subs(t){for(let e=0;e<t.length;e++)t[e]in this.subs?delete this.subs[t[e]]:console.log("Handle not found: "+t[e])}fqentity(t,e){return t+"."+e}logout(){delete localStorage.ad_creds,this.subs=[],this.ad_connect(this.need_logon,"")}process_callback(t,e,s,a,n){Object.keys(t).forEach(i=>{let r=t[i];if(r.type===e)if("connect"===e||"namespace"===e)this.subs[i].callback(a,s,n);else if("state"===e){let e=!0;if("*"!==r.spec){let t=r.spec.split("."),s=a.split(".");e=!0;for(let a=0;a<t.length;a++)t[a]!==s[a]&&(e=!1)}e&&t[i].callback(a,s,n,r.copyfunction)}else"log"===e?t[i].callback(s,n):"event"===e&&t[i].callback(n)})}ad_connect(t,e){this.need_logon=t;let s="";null!==e?(localStorage.ad_creds=e,s=e):localStorage.ad_creds&&(s=localStorage.ad_creds),this.stream=new Vs("ws",location.protocol,this.host,this.port,"Admin Client",s,this.on_connect.bind(this),this.on_message.bind(this),this.on_disconnect.bind(this),this.on_error.bind(this),t)}on_error(t){console.log(t)}on_connect(){this.stream.get_state("*","*",this.got_initial_state.bind(this)),this.stream.get_logs(this.got_logs.bind(this),1e3),this.stream.listen_event("*","*",this.got_event.bind(this)),this.stream.listen_state("*","*",this.got_state_update.bind(this))}on_disconnect(){this.connected=!1,this.process_callback(this.subs,"connect",null,null,this.connected),this.state=[],this.namespace=[]}on_message(){}got_logs(t){Object.keys(t.data).forEach(e=>{let s=[];this.log_list.push(e),this.process_callback(this.subs,"log","add",e);for(let a=0;a<t.data[e].lines.length;a++){let n={log:e,line:t.data[e].lines[a]};s.length>=this.max_logs&&s.splice(),s.push(n)}this.logs=this.logs.concat(s)});for(let e=0;e<this.logs.length;e++)this.process_callback(this.subs,"log","update","",this.logs[e])}got_initial_state(t){this.state=[],this.namespace=[],Object.keys(t.data).forEach(e=>{this.namespace.push(e),this.process_callback(this.subs,"namespace","add",e),Object.keys(t.data[e]).forEach(s=>{this.process_callback(this.subs,"state","add",this.fqentity(e,s),t.data[e][s])})}),this.state=t.data,this.connected=!0,this.process_callback(this.subs,"connect",null,null,this.connected)}got_event(t){let e=t.data.namespace,s=t.data.data.entity_id,a=t.data.data.state,n=e+"."+s;if(t.data.time_received=new Date,"__AD_ENTITY_ADDED"===t.data.event_type)this.state[e][s]=a,this.process_callback(this.subs,"state","add",n,a);else if("__AD_ENTITY_REMOVED"===t.data.event_type)delete this.state[e][s],this.process_callback(this.subs,"state","remove",n,a);else if("__AD_LOG_EVENT"===t.data.event_type){let e={log:t.data.data.log_type,line:t.data.data.formatted_message};this.logs.length>=this.max_logs&&this.logs.shift(),this.logs.push(e),this.process_callback(this.subs,"log","update","",e)}else this.events.length>=this.max_events&&this.events.pop(),this.events.unshift(t.data),this.process_callback(this.subs,"event","","",t.data)}got_state_update(t){let e=t.data.namespace,s=t.data.data.entity_id,a=t.data.data.new_state;this.state[e][s]=a;let n=e+"."+s;this.process_callback(this.subs,"state","update",n,a)}}a["default"].config.productionTip=!1,a["default"].mixin(Is),Object.defineProperty(a["default"].prototype,"$SUBS",{value:new Fs}),Object.defineProperty(a["default"].prototype,"$UTILS",{value:new ot}),Object.defineProperty(a["default"].prototype,"$TABS",{value:[{title:"Home",icon:"mdi-home",nav:"/"},{title:"State",icon:"mdi-chemical-weapon",nav:"/state?tab=apps"},{title:"Events",icon:"mdi-arrow-collapse-down",nav:"/events"},{title:"Logs",icon:"mdi-database",nav:"/logs"},{title:"Dashboards",icon:"mdi-tablet-dashboard",nav:"/dashboards"}]}),new a["default"]({router:js,vuetify:Cs,render:t=>t(rt)}).$mount("#app")},6:function(t,e){},7:function(t,e){},8:function(t,e){},9:function(t,e){},d9e6:function(t,e,s){},f7c2:function(t,e,s){"use strict";s("d9e6")}});
//# sourceMappingURL=app.js.map
